<!DOCTYPE html>
<html>
	<head>
		<!--Import Google Icon Font-->
		<link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		<!--Import materialize.css-->
		<link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
		<link type="text/css" rel="stylesheet" href="css/stylesheet.css"/>
			
		<!--Let browser know website is optimized for mobile-->
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<title>Markov Chain Tools</title>
	</head>

	<body>
		<nav>
			<div class="nav-wrapper blue">
				<div class="brand-logo">
                    <a href="index.html"><span class="primary-logo">Markov Chain Tools </span></a>
                </div>
				<ul id="nav-mobile" class="right hide-on-med-and-down">
					<li class="active"><a href="index.html">Home</a></li>
					<li><a href="characters.html">Characters</a></li>
					<li><a href="words.html">Words</a></li>
				</ul>
			</div>
		</nav>
        <div class="container">
            <h3 class="title">Text generation using Markov Chains</h3>
            <div class="divider"></div>
            <p class="flow-text" id="textInput">I am eventually going to put stuff here, but for now I have to put boring and confusing text like this as I wrote a bunch of javascript and then forgot what it all meant. Normally I would write what is happening here and what it all means but I didn't leave any comments. Whoops. I probably should have thought of that in advance. I didn't though. Also this whole thing is only two commits. Not exactly the most refined way of making something. At this point I am just trying to type enough that when this starts changing there is enough sample space to make interesting things. Earlier the word whoops wouldn't change. I am hoping that now I have used the world whoops in a sentence it will be able to easily change to something else. I have no idea though. I forgot how this works as I had mentioned earlier. After further testing it isn't changing. I think the solution might be to either reduce the order of the Markov Chain or use other words in this text that are similar. Like hoops, loops and Who. </p>
        </div>
		
	<!--Import jQuery before materialize.js-->
	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
	<script type="text/javascript" src="js/materialize.min.js"></script>
    <script>
        setInterval(
            function(){
                var input = document.getElementById("textInput").innerHTML;
                var characters = [];
                var prob = [];
                var length = input.length;
                for (var i = 0; i < input.length-3; i++) {
                    var character = input.substr(i,4);
                    if(characters.indexOf(character) == -1) {
                        characters.unshift(character);
                        prob.unshift(1/input.length);
                    } else {
                        prob[characters.indexOf(character)] += (1/input.length);
                    }
                }
                var output = [getRandomLetter(),getRandomLetter(),getRandomLetter()];
                for (var i = 0; i < length-3; i++) {
                    var character = input.substr(i,3);
                    var subCharacters = [];
                    var subProb = [];
                    for (var j = 0; j < characters.length; j++) {
                        if (characters[j].substr(0,3) == character) {
                            subCharacters.push(characters[j].substr(3,1));
                            subProb.push(prob[j]);
                        }
                    }
                    character = getRandomItem(subCharacters, subProb);
                    output.push(character);
                }
                document.getElementById("textInput").innerHTML = output.join("");
            }
        , 5000);
    </script>
	</body>
</html>
